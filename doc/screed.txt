=====================================
screed - short read sequence database
=====================================

:Copyright: 2008-2009 Michigan State University
:Authors: Alex Nolley, C. Titus Brown
:Contact: badmit@gmail.com, ctb@msu.edu
:License: BSD

.. contents:

Introduction
============

screed is a database generation and querying package made to be used with gene
sequences generated by Solexa machines, namely FASTA and FASTQ formats. Values
such as sequence name, sequence description and the sequence itself can be
retrieved from these databases. screed consists of a c++ database writer and a
python/pyrex reader. Records from FASTA or FASTQ text files are parsed into a
database by the writer and then the records can be retrieved by index or name
with the reader.


Getting Going
=============

The following software packages are required to build and run screed:

* Python 2.4 or newer
* gcc
* make
* cmake
* pyrex

If you want to run the included tests after building, you will need to install
nose as well

Downloading
-----------

You will need git to download a copy from the public git repository:
    git-clone git://iorich.caltech.edu/git/public/screed

Installing
----------

Assuming you have already downloaded the package, this is how you build it::

  cd screed/
  cmake .
  make

To run the optional nosetests type::

  nosetests

Quick-Start
===========

Using the Writers
-----------------

At the moment there is no Python wrapper for the C++ database builders, so
they are run from the command line. There is a writer for FASTA files and a
writer for FASTQ files named fadbm and fqdbm respectivly. Databases made from
either are completly accessible from the reader. The format for using the
database writers is::

  ./fadbm PATH_TO_FASTA_FILE

or::

  ./fqdbm PATH_TO_FASTQ_FILE.

So, if you wanted to create a database from the tests/test.fa file the code is::

  bin/fadbm tests/test.fa

And now there are the files test.fa_screed, test.fa_screed_idx and
test.fa_screed_hash under the files/ directory. These three files are the
database of test.fa containing the raw data, indicies of records and the hashed
names of each record.

Using the Reader
----------------

Now that the databases are generated. Querying them is simple and can be done
from the Pyrex module

In the python interpreter, import the screed module from the python
subdirectory and load some databases::

    >>> import screed
    >>> fadb = screed.dbread('../tests/test.fa')
    >>> fqdb = screed.dbread('../tests/test.fastq')

The databases act like read-only dictionary objects::

    >>> fadb.keys()
    >>> fqdb.keys()

If you want to retrieve the names of the records from a database::

    >>> names = fadb.keys()

Or, to retrieve sequence information::

    >>> sequences = []
    >>> for key in fqdb:
    ...     record = fqdb[key]
    ...     sequences.append(record.sequence)

Length of the databases are easily found::

    >>> print len(fadb)
    22
    >>> print len(fqdb)
    49

Records can also be retrieved by index::

    >>> fqdb.loadRecordByIndex(5)

..
    Local Variables:
    mode: rst
    mode: outline-minor
    End:

